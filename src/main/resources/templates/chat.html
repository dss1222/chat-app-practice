<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Simple Chat</title>
    <style>
        #chat-box {
            width: 100%;
            height: 300px;
            border: 1px solid #ccc;
            overflow-y: scroll;
            margin-bottom: 10px;
        }

        #message {
            width: 80%;
        }
    </style>
</head>

<body>
    <h2>ê·¸ë£¹ ì±„íŒ…</h2>
    <label for="nickname">ë‹‰ë„¤ì„:</label>
    <input type="text" id="nickname" placeholder="ë‹‰ë„¤ì„ ì…ë ¥">
    <button onclick="connect()">ì…ì¥</button>

    <div id="chat-box"></div>

    <input type="text" id="message" placeholder="ë©”ì‹œì§€ ì…ë ¥">
    <button onclick="sendMessage()">ì „ì†¡</button>

    <script>
        let socket = null;

        function connect() {
            const nickname = document.getElementById("nickname").value;
            if (!nickname) {
                alert("ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”!");
                return;
            }

            socket = new WebSocket("ws://" + window.location.host + "/ws/chat");

            socket.onopen = function () {
                appendMessage("ğŸ”” ì±„íŒ…ë°©ì— ì…ì¥í–ˆìŠµë‹ˆë‹¤.");
            };

            socket.onmessage = function (event) {
                appendMessage(event.data);
            };

            socket.onclose = function () {
                appendMessage("ğŸ”• ì—°ê²°ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
            };
        }

        function sendMessage() {
            const messageBox = document.getElementById("message");
            const nickname = document.getElementById("nickname").value;
            const content = messageBox.value;
            if (socket && socket.readyState === WebSocket.OPEN) {
                socket.send(nickname + ": " + content);
                messageBox.value = "";
            }
        }

        function appendMessage(message) {
            const chatBox = document.getElementById("chat-box");
            chatBox.innerHTML += message + "<br>";
            chatBox.scrollTop = chatBox.scrollHeight;
        }
    </script>
</body>

</html>